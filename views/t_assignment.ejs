<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teachers Dashboard</title>
    <link rel="stylesheet" href="output.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0" />
    <link rel="shortcut icon" href="/images/AttendPro-logo.png" type="image/x-icon">
    <script type="text/javascript" src="/js/t_script.js" defer></script>
    <script type="text/javascript" src="/js/t_assignment.js" defer></script>

</head>

<body class="h-screen overflow-hidden">
    <!-- Navbar -->
    <div class="nav-con text-[#515151] w-full bg-[#F7F7F7] fixed top-0 left-0 z-10 h-16">
        <nav class="navbar w-11/12 flex justify-between items-center m-auto">
            <div onclick="window.location.href='/'" class="at-logo text-[#515151] font-bold text-2xl flex items-center">
                Attend<span class="text-[#DB2878]">Pro</span>
            </div>
            <div class="nav-links flex items-center">
                <div class="w-44 h-12 border-2 border-gray-300 rounded-lg m-2 flex justify-center items-center ">Role :
                    Teacher</div>
                <span class="menu material-symbols-outlined cursor-pointer sm:!hidden"
                    style="font-size: 40px; ">menu</span>
            </div>
        </nav>
    </div>

    <!-- Sidebar -->
    <div
        class="sidebar h-full w-60 bg-[#F7F7F7] shadow-black p-4 text-[#515151] fixed top-16 left-0 overflow-y-auto hidden sm:block">
        <div class="flex flex-col">
            <!-- <div class="items-end"> -->
            <span class="material-symbols-outlined cursor-pointer self-end transition-transform duration-300"
                id="mini_sb">keyboard_arrow_left</span>
            <!-- </div>/ -->

            <div onclick="openPage('t_dashboard')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878]  "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">space_dashboard</span>
                <a class="sb-item group-hover:text-[#DB2878] ">Dashboard</a>
            </div>
            <div onclick="openPage('/t_profile')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878] "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">person</span>
                <a class="sb-item group-hover:text-[#DB2878]">Profile</a>
            </div>
            <div onclick="openPage('/t_view_attendance')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878] "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">visibility</span>
                <a class="sb-item group-hover:text-[#DB2878]">View Attendance</a>
            </div>
            <div onclick="openPage('/t_mark_attendance')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878] "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">check_box</span>
                <a class="sb-item group-hover:text-[#DB2878]">Mark Attendance</a>
            </div>
            <div
                class="w-full h-12 my-2 flex rounded items-center gap-3 bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2 bg-[#DB2878] "></div>
                <span class="material-symbols-outlined text-[#DB2878]">assignment</span>
                <a class="sb-item text-[#DB2878]">Assignments</a>
            </div>
            <div onclick="openPage('/t_logout')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878] "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">logout</span>
                <a class="sb-item group-hover:text-[#DB2878]">Log Out</a>
            </div>
            <div onclick="openPage('/t_help')"
                class="w-full h-12 my-2 flex rounded items-center gap-3 hover:bg-[#DB2878]/20 group cursor-pointer overflow-hidden">
                <div class="h-full w-2  group-hover:bg-[#DB2878] "></div>
                <span class="material-symbols-outlined group-hover:text-[#DB2878]">help</span>
                <a class="sb-item group-hover:text-[#DB2878]">Help</a>
            </div>
        </div>
    </div>

    <!-- Main Section -->
    <!-- div of lectures and existinf assignments  -->
    <div class="main-sec ml-0 sm:ml-60 mt-16 p-8 h-[calc(100vh-4rem)] overflow-auto bg-gray-200/70 text-[#515151] "
        id="main-sec"
        style="background-image: url('/images/light-pink5.jpg');">
            <div class="w-full">
                <div class="mx-auto mt-6 text-xl font-semibold w-fit text-center"> 
                    <!-- style="background: rgb(253, 241, 242); -->
                <h2 class="text-2xl font-bold text-[bg-white] mb-6 text-center">Existing Lectures</h2>
                </div>

                <!-- contains dynamic lecture cards -->
                <div id="lecture-container" class="flex flex-wrap justify-center"></div>
                <!-- load lectures using js -->

            </div>

            <div id="lecturePrompt" class="w-full text-center py-4 mt-4">
                <span class="text-xl font-semibold text-[bg-white] ">
                  Choose a lecture to display assignments.....
                </span>
            </div>
            
            <!-- hidden div for existing assignments and add assignments -->

            <div id="assignemts_div" class="mb-4 ml-0 px-4 justifyi-center overflow-y-auto rounded-lg hidden" >
                <!-- style="background: rgb(253, 241, 242);" -->

                <div class="mt-12 w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3 mx-auto bg-white p-6 rounded-xl shadow-md border border-gray-200">
                    <h2 class="text-2xl font-semibold text-[#DB2878] mb-6 text-center">Assignments</h2>
                  
                    <!-- New Full-Width Row Div -->
                    <div id="assignment-container" class="w-full bg-gray-50 p-4 rounded-lg flex flex-col gap-4 shadow-sm">
                  
                    </div>
                </div>

                <button type="button" id="add" name="add" class="mt-6 mb-6 py-2 px-4 bg-[#DB2878] text-white rounded-md font-semibold hover:shadow-[0_0_10px_#DB2878] transition duration-200 cursor-pointer mx-auto block">
                    Add Assignment
                </button>
            </div>
                  
    </div>
    
    <!-- div of add assignemt ----------initially hidden - gets active on button click -->

    <div class="add_assignm_class ml-0 sm:ml-60 mt-16 p-8 h-[calc(100vh-4rem)] overflow-auto bg-gray-200/70 text-[#515151] hidden"
        id="add_assignm_class">
        
        <!-- transition element -->
        <div id="loadingOverlay">
            <div class="spinner"></div>
                <div>Uploading... Please wait.</div>
        </div>

        <!-- // enctype sends req.file with req.body to send images and pdf -->
        <form id = "form_add_Assignment" class="bg-white p-6 rounded-lg shadow-md max-w-xl mx-auto space-y-4" method="POST" enctype="multipart/form-data" action="/t_assignment">
            <h2 class="text-2xl font-semibold mb-4 text-center">Add Assignment</h2>
            <div id = "some_div" class="mx-auto mt-6 bg-white text-xl font-semibold w-fit text-center" style="background: rgb(253, 241, 242);">

            </div>
            <!-- <h3 class="text-2xl font-semibold mb-4 text-left">Subject : <%= "maths" %> Section : <%= "T1" %> -->
            </h3>

            <!-- Lecture Info -->

            <div>
                <label for="title" class="block text-xl font-large text-gray-700 mb-1">Assignment Title</label>
                <input type="text" id="title" name="title" required placeholder="Enter assignment title"
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            </div>
            <br>
            <!-- <div>
                <label for="arrival_date" class="block text-xl font-medium text-gray-700 mb-1">Date of Announcement</label>
                <input type="date" id="arrival_date" name="arrival_date" required
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            </div>
            <br>
            <div>
                <label for="due_date" class="block text-xl font-medium text-gray-700 mb-1">Due Date</label>
                <input type="date" id="due_date" name="due_date" required
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            </div> -->
            <div class="flex space-x-4">
                <div class="inline-block w-1/2 pr-3 align-top">
                    <label for="arrival_date" class="block text-xl font-medium text-gray-700 mb-1">Date of Issue</label>
                    <input type="date" id="arrival_date" name="arrival_date" required
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
                </div>
                <div class="inline-block w-1/2 pr-3 align-top" style="padding-left: 100px;">
                    <label for="due_date" class="block text-xl font-medium text-gray-700 mb-1">Due Date</label>
                    <input type="date" id="due_date" name="due_date" required
                        class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
                </div>
            </div>
            <br>

            <div>
                <label for="remarks" class="block text-xl font-medium text-gray-700 mb-1">Remarks</label>
                <textarea id="remarks" name="remarks" rows="4" placeholder="E.g., Complete this ASAP"
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-y"></textarea>
            </div>
            <br>

            <label for="attachment" class="block text-xl text-gray-600 font-medium mb-1">Upload Assignment File
                (PDF/Image)</label>

            <input type="file" id="attachment" name="attachment" accept=".pdf,image/*" required
                class="w-full border border-gray-300 rounded-lg px-4 py-2 text-gray-700 file:mr-4 
                file:py-2 file:px-4 file:border-0 file:text-sm file:bg-blue-100
                 file:text-blue-700 hover:file:bg-blue-200" />


            <div class="flex justify-center mt-6 gap-4">
                <button type="submit"
                    class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-black font-semibold rounded-lg shadow-md hover:from-purple-700 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-400 transition duration-200">
                    Submit
                </button>
                <button 
                    id = "cancel_btn" name = "cancel_btn"   
                class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-black font-semibold rounded-lg shadow-md hover:from-purple-700 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-400 transition duration-200">
                    Back
                </button>
            </div>


        </form>
    </div>

</body>

<style>
     #loadingOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(3px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    flex-direction: column;
    color: white;
    font-family: Arial, sans-serif;
  }

  .spinner {
    border: 6px solid rgba(255, 255, 255, 0.2);
    border-top: 6px solid #ffffff;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

</html>